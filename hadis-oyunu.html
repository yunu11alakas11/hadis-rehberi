<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hadis-i Şerif İlmi Yarışması</title>
    <style>
        :root { --ana: #1b5e20; --altin: #b8860b; --arka: #f4f1ea; --yanlis: #d32f2f; --dogru: #388e3c; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--arka); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .game-card { background: white; width: 95%; max-width: 700px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); padding: 40px; border: 2px solid var(--altin); position: relative; display: none; text-align: center; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--altin); padding-bottom: 10px; margin-bottom: 20px; }
        .timer-bar { width: 100%; height: 8px; background: #eee; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
        #timer-fill { height: 100%; background: var(--ana); width: 100%; transition: width 0.1s linear; }
        .soru-metni { font-size: 1.1rem; color: #555; font-weight: bold; margin-bottom: 15px; }
        .hadis-metni { font-size: 1.4rem; line-height: 1.6; color: #222; margin-bottom: 30px; font-style: italic; background: #fdfbf7; padding: 25px; border-radius: 10px; border: 1px dashed var(--altin); }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .btn { padding: 18px; border: 2px solid var(--ana); border-radius: 8px; background: white; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: 0.3s; }
        .btn:hover { background: var(--ana); color: white; }
        #feedback-popup { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; padding: 30px; border-radius: 15px; text-align: center; z-index: 100; display: none; font-size: 1.5rem; box-shadow: 0 0 20px rgba(0,0,0,0.5); border: 3px solid white; }
        .menu-btn { background: var(--ana); color: white; padding: 20px 60px; border-radius: 50px; font-size: 1.5rem; border: none; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .kaynak-bilgi { font-size: 0.9rem; display: block; margin-top: 10px; font-weight: normal; color: #333; }
    </style>
</head>
<body>

    <div id="start-screen" style="text-align:center;">
        <h1 style="color: var(--ana); font-size: 3rem; margin-bottom: 10px;">HADİS-İ ŞERİF İLMİ</h1>
        <p style="font-size: 1.2rem; color: #555; margin-bottom: 30px;">5 Aşama - Süreli ve Kaynaklı Yarışma</p>
        <button class="menu-btn" onclick="basla()">Yarışmaya Başla</button>
    </div>

    <div class="game-card" id="game-card">
        <div class="header">
            <div id="level-info" style="color: var(--altin); font-weight: bold; font-size: 1.2rem;">AŞAMA 1</div>
            <div id="score-info" style="font-weight: bold;">Soru: 1/10</div>
        </div>
        <div class="timer-bar"><div id="timer-fill"></div></div>
        
        <div id="soru-baslik" class="soru-metni">Yükleniyor...</div>
        <div id="hadis-alan" class="hadis-metni"></div>
        
        <div class="options-grid" id="options"></div>
        <div id="feedback-popup"></div>
    </div>

<script>
const devHavuz = [
    { s: "Peygamberimiz amellerin kıymetini neye bağlamıştır?", h: "Ameller ancak _______ göredir. Herkes niyetinin karşılığını alır.", d: "niyetlere", yan: ["şartlara", "zamanlara", "insanlara"], k: "Buhari, Bed’ü’l-Vahy, 1" },
    { s: "Müslümanların kardeşliği hakkında ne buyurulmuştur?", h: "Müslüman, Müslümanın _______; ona zulmetmez, onu yardımsız bırakmaz.", d: "kardeşidir", yan: ["dostudur", "komşusudur", "emanetidir"], k: "Müslim, Birr, 32" },
    { s: "İnsanın en hayırlısı kimdir?", h: "Sizin en hayırlınız, _______ en güzel olanınızdır.", d: "ahlakı", yan: ["ibadeti", "bilgisi", "zenginliği"], k: "Buhari, Edeb, 38" },
    { s: "Dua hakkında ne buyurulmuştur?", h: "Dua, _______ özüdür.", d: "ibadetin", yan: ["hayatın", "imanın", "başarının"], k: "Tirmizi, Daavât, 1" },
    { s: "Temizlik hakkında ne buyurulmuştur?", h: "Temizlik, _______ yarısıdır.", d: "imanın", yan: ["sağlığın", "huzurun", "hayatın"], k: "Müslim, Tahâret, 1" },
    { s: "Komşu hakkı hakkında ne buyurulmuştur?", h: "Yanı başındaki komşusu açken tok yatan _______ değildir.", d: "bizden", yan: ["mümin", "insan", "huzurlu"], k: "Hâkim, Müstedrek, II, 15" },
    { s: "İyiliğe vesile olmak hakkında ne buyurulmuştur?", h: "Hayra vesile olan, hayrı _______ gibidir.", d: "yapan", yan: ["seven", "gören", "bilen"], k: "Tirmizi, İlim, 14" },
    { s: "İlim öğrenmek hakkında ne buyurulmuştur?", h: "İlim öğrenmek, her Müslümana _______.", d: "farzdır", yan: ["sünnettir", "sevaptır", "görevdir"], k: "İbn Mâce, Mukaddime, 17" }
];

let sira = 0, asama = 1, zamanlayici, kilit = false;

function basla() {
    document.getElementById('start-screen').style.display = 'none';
    document.getElementById('game-card').style.display = 'block';
    soruGetir();
}

function soruGetir() {
    if(sira >= 10) { 
        asama++; 
        sira = 0; 
        if(asama > 5) {
            alert("TEBRİKLER! Tüm ilim aşamalarını tamamladınız.");
            location.reload();
            return;
        }
    }
    
    kilit = false;
    const h = devHavuz[Math.floor(Math.random() * devHavuz.length)];
    
    document.getElementById('level-info').innerText = "AŞAMA " + asama;
    document.getElementById('score-info').innerText = "Soru: " + (sira + 1) + "/10";
    document.getElementById('hadis-alan').innerText = h.h;
    document.getElementById('soru-baslik').innerText = h.s;
    
    secenekleriDiz(h);
    sureBaslat();
}

function secenekleriDiz(h) {
    const optDiv = document.getElementById('options');
    optDiv.innerHTML = '';
    let btnlar = [h.d, ...h.yan].sort(() => Math.random() - 0.5);
    
    btnlar.forEach(txt => {
        const b = document.createElement('button');
        b.className = 'btn';
        b.innerText = txt;
        b.onclick = () => kontrol(txt, h);
        optDiv.appendChild(b);
    });
}

function sureBaslat() {
    clearInterval(zamanlayici);
    let sn = 15 - (asama * 2); // Aşamalar ilerledikçe süre azalır
    if(sn < 5) sn = 5; 
    let toplam = sn;
    const bar = document.getElementById('timer-fill');
    
    zamanlayici = setInterval(() => {
        sn -= 0.1;
        bar.style.width = (sn / toplam) * 100 + "%";
        if(sn <= 0) {
            clearInterval(zamanlayici);
            kontrol("SÜRE DOLDU", {d: ""});
        }
    }, 100);
}

function kontrol(secilen, h) {
    if(kilit) return;
    kilit = true;
    clearInterval(zamanlayici);
    const pop = document.getElementById('feedback-popup');
    pop.style.display = 'block';
    
    if(secilen === h.d) {
        pop.style.background = '#e8f5e9';
        pop.style.color = 'var(--dogru)';
        pop.innerHTML = `✅ DOĞRU!<br><span class="kaynak-bilgi">${h.k}</span>`;
        setTimeout(() => { pop.style.display='none'; sira++; soruGetir(); }, 2000);
    } else {
        pop.style.background = '#ffebee';
        pop.style.color = 'var(--yanlis)';
        pop.innerHTML = `❌ YANLIŞ!<br><span style="font-size:1rem; color:#333;">Doğru cevap: ${h.d}</span>`;
        setTimeout(() => { pop.style.display='none'; soruGetir(); }, 2500);
    }
}
</script>
</body>
</html>